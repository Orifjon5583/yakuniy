<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Yechish</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .correct { background-color: #d1fae5; border-color: #10b981; color: #065f46; }
        .incorrect { background-color: #fee2e2; border-color: #ef4444; color: #991b1b; }
        .selected-nav { background-color: #2563eb; color: white; border-color: #2563eb; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #c1c1c1; border-radius: 4px; }
    </style>
</head>
<body class="bg-gray-50 h-screen flex flex-col font-sans">

    <!-- Header -->
    <header class="bg-white shadow-sm p-4 flex justify-between items-center z-20 sticky top-0">
        <h1 class="text-xl font-bold text-gray-800 tracking-tight" id="testTitle">Test Jarayoni</h1>
        <div class="flex items-center space-x-4">
            <div class="bg-red-50 text-red-600 px-4 py-2 rounded-lg font-bold text-xl font-mono border border-red-100 shadow-sm" id="timer">00:00</div>
            <button onclick="finishTest()" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition shadow-md font-medium">Yakunlash</button>
        </div>
    </header>

    <div class="flex flex-1 overflow-hidden">
        <!-- Chap: Savol -->
        <main class="flex-1 p-4 md:p-8 overflow-y-auto bg-gray-50">
            <div class="max-w-4xl mx-auto bg-white p-8 rounded-2xl shadow-sm border border-gray-100">
                <div class="flex justify-between items-center mb-8">
                    <span class="text-sm font-bold text-blue-600 uppercase tracking-wider bg-blue-50 px-3 py-1 rounded-full" id="questionCounter">SAVOL 1</span>
                    <button id="markBtn" class="text-gray-400 hover:text-yellow-500 transition flex items-center gap-2 font-medium">
                        <i class="far fa-bookmark text-lg"></i> Belgilash
                    </button>
                </div>
                
                <div class="mb-8">
                    <p id="questionText" class="text-2xl font-semibold text-gray-900 leading-snug">Savol yuklanmoqda...</p>
                </div>
                
                <div id="options" class="space-y-3">
                    <!-- Variantlar -->
                </div>

                <div class="flex justify-between mt-10 pt-6 border-t border-gray-100">
                    <button id="prevBtn" class="px-6 py-3 bg-gray-100 text-gray-600 rounded-xl hover:bg-gray-200 transition font-medium disabled:opacity-50">Oldingi</button>
                    <button id="nextBtn" class="px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition font-medium shadow-lg shadow-blue-200">Keyingi</button>
                </div>
            </div>
        </main>

        <!-- O'ng: Navigatsiya -->
        <aside class="w-80 bg-white border-l border-gray-200 p-6 overflow-y-auto hidden lg:block shadow-inner">
            <h3 class="font-bold text-gray-800 mb-6 flex items-center gap-2 text-lg">
                <i class="fas fa-th-large text-blue-500"></i> Savollar ro'yxati
            </h3>
            <div id="navGrid" class="grid grid-cols-5 gap-2">
                <!-- Navigatsiya tugmalari -->
            </div>
        </aside>
    </div>

    <script>
        // ---------------------------------------------------------
        // BARCHA 236 TA SAVOL VA TO'G'RI JAVOBLAR (AI tomonidan aniqlandi)
        // c: 0=A, 1=B, 2=C, 3=D
        // ---------------------------------------------------------
        const ALL_QUESTIONS = [
            { q: "1. Signal nima?", o: ["A) Faqat tovush to‘lqinlari", "B) Axborotni tashuvchi fizik kattalik", "C) Elektr energiyasining turi", "D) Faqat tasvir"], c: 1 },
            { q: "2. Deterministik signal qanday signal?", o: ["A) Oldindan aniq ifodalanadigan signal", "B) Tasodifiy xarakterga ega", "C) Faqat analog", "D) Faqat raqamli"], c: 0 },
            { q: "3. Tasodifiy signalning asosiy belgisi?", o: ["A) Har doim takrorlanadi", "B) Oldindan to‘liq aniqlab bo‘lmaydi", "C) Sinus shaklida bo‘ladi", "D) Spektri yo‘q"], c: 1 },
            { q: "4. Analog signal qanday ifodalanadi?", o: ["A) Diskret qiymatlar bilan", "B) Cheksiz sonli qiymatlar bilan", "C) Faqat ikkilik sonlar bilan", "D) Matnli ko‘rinishda"], c: 1 },
            { q: "5. Quyidagilardan qaysi biri signal turiga kirmaydi?", o: ["A) Audio signal", "B) Video signal", "C) Radiatsiya", "D) Matn hujjati"], c: 3 },
            { q: "6. Tasvir signali qanday hosil bo‘ladi?", o: ["A) Matnni kodlash orqali", "B) Yorug‘likning fazoviy tarqalishidan", "C) Elektr tokining chastotasidan", "D) Magnit maydonidan"], c: 1 },
            { q: "7. Signalning asosiy parametrlari qaysilar?", o: ["A) Amplituda, chastota, faza", "B) Rang, shakl, og‘irlik", "C) Sifat, tezlik, hajm", "D) Masshtab, koordinata, rang"], c: 0 },
            { q: "8. Analog signalning asosiy xususiyati nima?", o: ["A) Diskret qiymatlarga ega", "B) Uzluksiz bo‘lishi", "C) Shovqinga sezgir emasligi", "D) Doimiy chastotaga ega"], c: 1 },
            { q: "9. Raqamli signal qanday qiymatlardan iborat bo‘ladi?", o: ["A) Cheksiz ko‘p qiymatlardan", "B) Diskret va chekli qiymatlardan", "C) Analog kattaliklardan", "D) Vaqtning uzluksiz funksiyalaridan"], c: 1 },
            { q: "10. Signallarni qayta ishlashning asosiy maqsadi nima?", o: ["A) Shovqinni kuchaytirish", "B) Foydali ma’lumotlarni ajratib olish", "C) Ma’lumotni buzish", "D) Signallarni kamaytirish"], c: 1 },
            { q: "11. Inson audiovizual tizimi deganda nima tushuniladi?", o: ["A) Faqat ko‘rish", "B) Ko‘rish va eshitish tizimlari birgaligi", "C) Faqat nutq", "D) Kompyuter grafikasi"], c: 1 },
            { q: "12. Audiovizual tizim orqali inson qanday ma’lumot oladi?", o: ["A) Faqat matn", "B) Tasvir va ovoz orqali", "C) Faqat raqamli", "D) Faqat elektromagnit"], c: 1 },
            { q: "13. Nutq signallariga ishlov berish texnologiyalariga misol:", o: ["A) Ovozdan matn yaratish, nutqni tanish", "B) Faqat signalni kuchaytirish", "C) Raqamli tasvirni o‘zgartirish", "D) Data siqish"], c: 0 },
            { q: "14. Nutq signaliga ishlov berishda asosiy maqsad:", o: ["A) Ovoz sifatini pasaytirish", "B) Nutqni tahlil qilish va tanib olish", "C) Ovozning hajmini kattalashtirish", "D) Ovozni faqat yozib olish"], c: 1 },
            { q: "15. Nutq signallarini tahlil qilishda eng ko‘p ishlatiladigan usul?", o: ["A) MFCC", "B) Fourier qatorlari", "C) Tasodifiy signal", "D) Raqamli siqish"], c: 0 },
            { q: "16. Matlabda signalni ekranda tasvirlash buyrug'i?", o: ["A) Plot()", "B) Wavread()", "C) Clc", "D) Pwelch()"], c: 0 },
            { q: "17. Signal deb nima aytiladi?", o: ["A) fizik jarayonning parametrlarini o‘zgarishiga", "B) inson haqida ma’lumot", "C) ma'lumotnoma", "D) jadval"], c: 0 },
            { q: "18. EEG qaysi biosignalni o‘lchash uchun ishlatiladi?", o: ["A) Yurak urishi", "B) Miyaning elektr faolligi", "C) Mushak harakati", "D) Nafas olish"], c: 1 },
            { q: "19. EKG asosan nima uchun qo‘llaniladi?", o: ["A) Miya faoliyati", "B) Yurak faoliyatini qayd etish", "C) Nutqni qayd qilish", "D) Tasvir olish"], c: 1 },
            { q: "20. Ko‘rish tizimida asosiy sezgir element nima?", o: ["A) Qon tomirlari", "B) To‘r pardadagi fotoretseptorlar", "C) Mushak tolalari", "D) Asab tugunlari"], c: 1 },
            { q: "21. Furye o‘zgartirishning asosiy maqsadi?", o: ["A) Vaqt sohasidan chastota sohasiga o‘tkazish", "B) Kuchaytirish", "C) Kodlash", "D) Tasodifiylashtirish"], c: 0 },
            { q: "22. Furye o‘zgartirishning teskari turi nima uchun kerak?", o: ["A) Chastotadan vaqt sohasiga qaytarish", "B) Shovqinlashtirish", "C) Siqish", "D) Kodlash"], c: 0 },
            { q: "23. Spektr nima?", o: ["A) Signalning chastota tarkibi", "B) Amplituda", "C) Uzunlik", "D) Faza"], c: 0 },
            { q: "24. Quvvat spektral tahlili nima?", o: ["A) Energiyani chastotalar bo‘yicha taqsimlash", "B) Kuchaytirish", "C) Kodlash", "D) Uzatish"], c: 0 },
            { q: "25. Energiya spektral zichligi nima?", o: ["A) Energiya taqsimoti", "B) Amplituda qiymati", "C) Davriylik", "D) Faza"], c: 0 },
            { q: "26. Furye tahlili asosida qanday ko‘rsatkich olinadi?", o: ["A) Chastota, faza, amplituda", "B) Hajm", "C) Davr", "D) Uzunlik"], c: 0 },
            { q: "27. Fourier tahlilida signal qanday ifodalanadi?", o: ["A) Vaqt domenida", "B) Chastota domenida spektr ko‘rinishida", "C) Amplituda domenida", "D) Kompleks faza"], c: 1 },
            { q: "28. Furye o'zgartirish formulasi?", o: ["A) Integral formula", "B) Yig'indi", "C) Hosila", "D) Limit"], c: 0 }, // Matnli savolga o'girildi
            { q: "29. Uzluksiz Furye o‘zgartirish qaysi signallar uchun?", o: ["A) Diskret", "B) Analog signallar", "C) Buzilgan", "D) Shovqinli"], c: 1 },
            { q: "30. Spektral tahlil natijasida nima bilinadi?", o: ["A) Chastotalar va quvvat", "B) Uzunlik", "C) Rang", "D) Nom"], c: 0 },
            { q: "31. Quvvat spektral tahlili nimani o'rganadi?", o: ["A) Signal energiyasi", "B) Balandlik", "C) Yo‘nalish", "D) Hajm"], c: 0 },
            { q: "32. Davriy signal qanday signal?", o: ["A) Tasodifiy", "B) Vaqt oralig‘ida takrorlanadi", "C) Sinus shaklida", "D) Davomsiz"], c: 1 },
            { q: "33. Davriy bo‘lmagan signalning xususiyati?", o: ["A) Takrorlanadi", "B) Takrorlanmaydi", "C) Sinus shaklida", "D) Analog"], c: 1 },
            { q: "34. DCT ko‘proq qaysi sohada ishlatiladi?", o: ["A) Matematika", "B) Tasvir va video siqishda", "C) Elektromagnit", "D) Radiotexnika"], c: 1 },
            { q: "35. Davriy signalni ifodalash usuli?", o: ["A) Furye qatori", "B) Integrallar", "C) Matn", "D) Grafik"], c: 0 },
            { q: "36. Davriy bo‘lmagan signalni ifodalash usuli?", o: ["A) Furye integrali", "B) DCT", "C) MFCC", "D) Shovqinli model"], c: 0 },
            { q: "37. DCT algoritmi qaysi standartda asosiy?", o: ["A) JPEG siqish", "B) MPEG kodlash", "C) DOC", "D) PDF"], c: 0 },
            { q: "38. Quvvat spektridan nima aniqlanadi?", o: ["A) Signal kuchi qaysi chastotada ko‘pligi", "B) Faza", "C) Hajm", "D) Uzunlik"], c: 0 },
            { q: "39. DCT va DFT farqi?", o: ["A) DCT faqat kosinus", "B) DFT faqat sinus", "C) Farqi yo'q", "D) DCT raqamli emas"], c: 0 },
            { q: "40. Davriy signal ta'rifi?", o: ["A) Qaytarilmaydigan", "B) Takrorlanuvchi", "C) Vaqtga bog‘liq", "D) Shovqinsiz"], c: 1 },
            { q: "41. DCT formulasi?", o: ["A) Kosinuslar yig'indisi", "B) Sinuslar", "C) Eksponenta", "D) Integral"], c: 0 }, 
            { q: "42. Davriy signal uchun asosiy parametr?", o: ["A) Amplituda", "B) Davr (T)", "C) Faza", "D) Shovqin"], c: 1 },
            // Formulali savollar o'rniga nazariy
            { q: "44. DCT-1 xususiyati?", o: ["A) Juft simmetriya", "B) Toq simmetriya", "C) Davriylik", "D) Chiziqlilik"], c: 0 },
            { q: "45. DCT-2 xususiyati?", o: ["A) Eng ko'p ishlatiladigan", "B) Kam ishlatiladigan", "C) Murakkab", "D) Oddiy"], c: 0 },
            { q: "46. DCT-3 xususiyati?", o: ["A) Teskari DCT-2", "B) To'g'ri DCT", "C) Kvadrat", "D) Logarifmik"], c: 0 },
            { q: "47. DCT-4 xususiyati?", o: ["A) O'zgartirilgan", "B) Oddiy", "C) Murakkab", "D) Chiziqli"], c: 0 },
            { q: "48. Konvolyutsiya nima uchun ishlatiladi?", o: ["A) Aralashtirish", "B) Tizim orqali o‘tkazishni ifodalash", "C) Tasodifiylashtirish", "D) Kodlash"], c: 1 },
            { q: "49. Svyortka amali qayerda qo‘llaniladi?", o: ["A) Filtrlashda", "B) Buzishda", "C) Kodlashda", "D) Tahrirlashda"], c: 0 },
            { q: "50. 2D svyortka qaysi sohada qo‘llaniladi?", o: ["A) Tasvirlarga ishlov berishda", "B) Ovoz", "C) Matn", "D) Chizmalar"], c: 0 },
            { q: "51. Avtokorrelyatsiya nima?", o: ["A) O‘zi bilan solishtirish", "B) Ikki signalni", "C) Filtrlash", "D) Siqish"], c: 0 },
            { q: "52. Korrelyatsiya formulasi?", o: ["A) Integral ko'paytma", "B) Yig'indi", "C) Ayirma", "D) Bo'linma"], c: 0 },
            { q: "53. Korrelyatsiya qanday aniqlanadi?", o: ["A) Kechiktirilgan nusxa bilan o‘xshashlik", "B) Amplituda", "C) Chastota", "D) Uzunlik"], c: 0 },
            { q: "54. Avtokorrelyatsiya ta'rifi?", o: ["A) Boshqa signal bilan", "B) O‘zining kechiktirilgan nusxasi bilan", "C) Nolga tenglash", "D) Filtrlash"], c: 1 },
            { q: "55. Korrelyatsiya nimani o‘lchaydi?", o: ["A) O‘xshashlikni", "B) Davrni", "C) Fazani", "D) Rangni"], c: 0 },
            { q: "56. 2D korrelyatsiya maqsadi?", o: ["A) Tasvirlarni taqqoslash", "B) Ovoz kuchaytirish", "C) Video", "D) Chastota"], c: 0 },
            { q: "57. Kross-korrelyatsiya vazifasi?", o: ["A) Ikki turli signal o‘xshashligi", "B) Siqish", "C) Buzish", "D) Kuchaytirish"], c: 0 },
            { q: "58. Konvolyutsiya va korrelyatsiya farqi?", o: ["A) Bitta signal teskari aylantiriladi", "B) Nol bo‘ladi", "C) Kuchayadi", "D) Qisqaradi"], c: 0 },
            { q: "59. Svyortka matematik ifodasi?", o: ["A) y(n) = x(n)*h(n)", "B) y(n) = x(n)+h(n)", "C) y(n) = x(n)-h(n)", "D) y(n) = x(n)/h(n)"], c: 0 },
            { q: "60. Diskret kross-korrelyatsiya?", o: ["A) r(k) = sum(x(n)y(n-k))", "B) r(k) = sum(x(n))", "C) r(k) = 0", "D) r(k) = 1"], c: 0 },
            { q: "61. Analog filtrlarning turlari?", o: ["A) LPF, HPF, BPF, BSF", "B) Diskret", "C) Matn", "D) Oddiy"], c: 0 },
            { q: "62. Signalni kuchaytirish qaysi filtr vazifasi emas?", o: ["A) LPF", "B) HPF", "C) BPF", "D) Hech biri (Filtr kuchaytirmaydi, o'tkazadi)"], c: 3 },
            { q: "63. Filtrlash maqsadi?", o: ["A) Keraksiz komponentlarni olish", "B) Shovqin", "C) Buzish", "D) Qisqartirish"], c: 0 },
            { q: "64. Analog filtr vazifasi:", o: ["A) Kuchaytirish", "B) Keraksiz chastotalarni yo‘qotish", "C) Buzish", "D) Siqish"], c: 1 },
            { q: "65. Past chastotali filtr vazifasi:", o: ["A) Yuqorini o‘tkazadi", "B) Pastni o‘tkazadi", "C) O'tkazmaydi", "D) Shovqin"], c: 1 },
            { q: "66. Yuqori chastotali filtr vazifasi:", o: ["A) Pastni o‘tkazish", "B) Yuqorini o‘tkazish", "C) O‘rta", "D) Hech narsa"], c: 1 },
            { q: "67. Polosali filtr vazifasi:", o: ["A) Biror chastotani", "B) Diapazonni o‘tkazish", "C) Pastni", "D) Yuqorini"], c: 1 },
            { q: "68. Teskari polosali filtr vazifasi:", o: ["A) Diapazonni to‘sish", "B) Hammasini o‘tkazish", "C) Yuqorini", "D) Pastni"], c: 0 },
            { q: "69. Analog filtrlar tarkibi?", o: ["A) R2-D2", "B) Rezistor, kondensator, induktor", "C) Chip", "D) Generator"], c: 1 },
            { q: "70. Past chastotali filtr nomi:", o: ["A) High-pass", "B) Low-pass", "C) Band-stop", "D) Band-pass"], c: 1 },
            { q: "71. Segmentlash maqsadi?", o: ["A) Filtrlash", "B) Qismlarga ajratish", "C) Siqish", "D) Tiklash"], c: 1 },
            { q: "72. Freymlashda signal qanday bo‘linadi?", o: ["A) Chegaralarga", "B) Kichik vaqt oraliqlarga", "C) Chastotalarga", "D) Amplitudaga"], c: 1 },
            { q: "73. Segmentlash qo‘llanilishi?", o: ["A) Nutq", "B) Tasvir", "C) Video", "D) Barchasida"], c: 3 },
            { q: "74. Freymlash natijasi?", o: ["A) Siqiladi", "B) Qismlarga bo‘linadi", "C) Kamayadi", "D) Tiklanadi"], c: 1 },
            { q: "75. Freymlash qanday bo'laklarga ajratiladi?", o: ["A) Cheksiz", "B) Katta", "C) Bir xil uzunlikdagi qisqa", "D) Bitta"], c: 2 },
            { q: "76. Segment uzunligi omili?", o: ["A) Signal chastotasi", "B) Xotira", "C) Amplituda", "D) Tur"], c: 0 },
            { q: "77. Overlap (ustma-ust) sababi?", o: ["A) Uzunlikni kamaytirish", "B) Informatsiyani yo‘qotmaslik", "C) Buzish", "D) Chastota"], c: 1 },
            { q: "78. Segmentlash sohasi?", o: ["A) Elektromagnit", "B) Nutqni qayta ishlash", "C) Fotonik", "D) Radiatsiya"], c: 1 },
            { q: "79. Freym uzunligi birligi?", o: ["A) Hz", "B) Millisekund", "C) Volt", "D) Bit"], c: 1 },
            { q: "80. Segmentlangan signalda amallar?", o: ["A) Yig‘indi", "B) Spektral tahlil", "C) Amplituda", "D) Hech narsa"], c: 1 },
            { q: "81. Namunalash nima?", o: ["A) Kamaytirish", "B) Diskret vaqt nuqtalarida o‘lchash", "C) Oshirish", "D) Filtrlash"], c: 1 },
            { q: "82. Nyquist teoremasi chastotasi?", o: ["A) Kichik", "B) Teng", "C) Ikki baravar katta", "D) Cheksiz"], c: 2 },
            { q: "83. Aliasing nima?", o: ["A) Kuchayish", "B) Shovqin", "C) Noto‘g‘ri chastota ko'rinishi", "D) Kamayish"], c: 2 },
            { q: "84. 3 kHz signal uchun namunalash?", o: ["A) 1.5 kHz", "B) 3 kHz", "C) 6 kHz", "D) 12 kHz"], c: 2 },
            { q: "85. Video namunalash chastotasi?", o: ["A) 20 Hz", "B) 25 Hz", "C) 44.1 kHz", "D) 13.5 MHz"], c: 3 },
            { q: "86. CD audio chastotasi?", o: ["A) 8 kHz", "B) 22.05 kHz", "C) 44.1 kHz", "D) 48 Hz"], c: 2 },
            { q: "87. Nyquist chastotasi nima?", o: ["A) Maksimal qiymat", "B) Signal chastotasining yarmi", "C) Namunalash chastotasining yarmi", "D) Amplituda"], c: 2 },
            { q: "88. Diskretlash bosqichlari?", o: ["A) Segmentlash", "B) Namunalash va kvantlash", "C) Filtrlash", "D) Kuchaytirish"], c: 1 },
            { q: "89. Kvantlash nima?", o: ["A) Chastota", "B) Amplitudani raqamlashtirish", "C) Filtr", "D) Qismlar"], c: 1 },
            { q: "90. Noto‘g‘ri diskretlash oqibati?", o: ["A) Kuchayish", "B) Aliasing", "C) Kengayish", "D) Filtrlash"], c: 1 },
            { q: "91. Diskret signal nima?", o: ["A) Uzluksiz", "B) Cheksiz", "C) Ma’lum nuqtalarda aniqlangan", "D) Analog"], c: 2 },
            { q: "92. Diskret signal afzalligi?", o: ["A) Shovqinga chidamli", "B) Yuqori chastota", "C) Uzluksiz", "D) Katta amplituda"], c: 0 },
            { q: "93. Z-o‘zgartirish maqsadi?", o: ["A) Amplituda", "B) Vaqt sohasidan Z-sohaga", "C) Chastota", "D) Kuchaytirish"], c: 1 },
            { q: "94. Vaqt siljishi Z-da?", o: ["A) Z darajasi o‘zgaradi", "B) Kamayadi", "C) Ortadi", "D) Nol bo‘ladi"], c: 0 },
            { q: "95. Z-o‘zgartirish sababi?", o: ["A) Kodlash", "B) Tizim tahlili", "C) Eshittirish", "D) Oshirish"], c: 1 },
            { q: "96. Diskret signal energiyasi?", o: ["A) Integral", "B) Kvadrat yig‘indilar", "C) Maksimal", "D) Amplituda"], c: 1 },
            { q: "97. Z-o‘zgartirish dasturi?", o: ["A) Photoshop", "B) MATLAB", "C) Word", "D) Excel"], c: 1 },
            { q: "98. Z-o‘zgartirish qaysi sohaga yaqin?", o: ["A) Laplas", "B) Fourier", "C) Konvolyutsiya", "D) Kvantlash"], c: 0 },
            { q: "99. DFT va FFT farqi?", o: ["A) DFT tez", "B) FFT tez algoritm", "C) Bir xil", "D) FFT analog"], c: 1 },
            { q: "100. FFT qayerda ishlatiladi?", o: ["A) Audio/video siqish", "B) Matn", "C) Grafik", "D) Hisob"], c: 0 },
            { q: "101. FFT ning DFT dan farqi?", o: ["A) Natija", "B) Hisoblash tezroq", "C) O‘zgartiradi", "D) Kuchaytiradi"], c: 1 },
            { q: "102. Tasodifiy signal nima?", o: ["A) Aniq", "B) Statistik tavsifli", "C) Ma'lumotsiz", "D) Doimiy"], c: 1 },
            { q: "103. Moslashuvchan filtr?", o: ["A) Kuchaytiradi", "B) Parametrlarni o‘zgartiradi", "C) Buzadi", "D) Kamaytiradi"], c: 1 },
            { q: "104. Median filtr vazifasi?", o: ["A) Shovqinni kamaytirish", "B) Chastota", "C) Kuchaytirish", "D) Kodlash"], c: 0 },
            { q: "105. Adaptiv filtr algoritmi?", o: ["A) LMS", "B) FFT", "C) JPEG", "D) DCT"], c: 0 },
            { q: "106. Tasodifiy signal modeli?", o: ["A) Ehtimollik taqsimoti", "B) Kvadrat", "C) O‘zgarmas", "D) Nol"], c: 0 },
            { q: "107. Tasodifiy signal taqsimoti?", o: ["A) Gaussian (Normal)", "B) Sinusoidal", "C) Logarifmik", "D) Chiziqli"], c: 0 },
            { q: "108. Median filtr qaysi shovqinga?", o: ["A) Oq", "B) Impuls shovqin", "C) Fazoviy", "D) Analog"], c: 1 },
            { q: "109. Moslashuvchan filtr algoritmlari?", o: ["A) LMS, RLS", "B) FFT", "C) JPEG", "D) Sobel"], c: 0 },
            { q: "110. LMS ma'nosi?", o: ["A) Least Mean Square", "B) Linear Multiple", "C) Long Median", "D) Low Memory"], c: 0 },
            { q: "111. RLS ma'nosi?", o: ["A) Random Linear", "B) Recursive Least Square", "C) Real Level", "D) Ratio Linear"], c: 1 },
            { q: "112. 2D Furye qayerda?", o: ["A) Audio", "B) Tasvir tahlili", "C) Matn", "D) Grafik"], c: 1 },
            { q: "113. 2D Furye natijasi?", o: ["A) Chastotaviy spektr", "B) Amplituda", "C) Matn", "D) Yig'indi"], c: 0 },
            { q: "114. 2D Furye dasturi?", o: ["A) MATLAB", "B) Word", "C) Photoshop", "D) AutoCAD"], c: 0 },
            { q: "115. 2D Furye vazifasi?", o: ["A) Rang", "B) Spektrini beradi", "C) Kattalashtiradi", "D) Aylantiradi"], c: 1 },
            { q: "116. Veyvlet ma'nosi?", o: ["A) Katta to'lqin", "B) Kichik to‘lqin", "C) Spektr", "D) Signal"], c: 1 },
            { q: "117. 2D Furye qaysi signalga?", o: ["A) Audio", "B) Matn", "C) Tasvir/Video", "D) Analog"], c: 2 },
            { q: "118. Veyvlet yechimi?", o: ["A) Aliasing", "B) Vaqt-chastota aniqligi", "C) Kvantlash", "D) Kuchaytirish"], c: 1 },
            { q: "119. 2D Furye filtrlash?", o: ["A) Chastotani kesib", "B) Kuchaytirib", "C) Segmentlab", "D) Kvantlash"], c: 0 },
            { q: "120. Veyvlet afzalligi?", o: ["A) Tasvirni siqish", "B) Kuchaytirish", "C) Oshirish", "D) Diskretlash"], c: 0 },
            { q: "121. Furye va Veyvlet farqi?", o: ["A) Furye-chastota, Veyvlet-vaqt+chastota", "B) Bir xil", "C) Kvantlash", "D) Segmentlash"], c: 0 },
            { q: "122. MPEG audio prinsipi?", o: ["A) Kvantlash", "B) Transformatsion", "C) Psixoakustik model", "D) Entropik"], c: 2 },
            { q: "123. MPEG-1 Layer III nomi?", o: ["A) MP2", "B) MP3", "C) AAC", "D) WAV"], c: 1 },
            { q: "124. MPEG maqsadi?", o: ["A) Kattalashtirish", "B) Siqish va sifat", "C) Filtrlash", "D) Diskretlash"], c: 1 },
            { q: "125. MPEG konteyner?", o: ["A) .mp4", "B) .bmp", "C) .jpg", "D) .gif"], c: 0 },
            { q: "126. MPEG-4 imkoniyati?", o: ["A) Audio", "B) Video", "C) Audio/Video/Interaktiv", "D) Rasm"], c: 2 },
            { q: "127. Kodek nima?", o: ["A) Kodlash/Dekodlash", "B) Chastota", "C) Hajm", "D) Filtr"], c: 0 },
            { q: "128. Entropiya kodlash usuli?", o: ["A) Fourier", "B) Huffman", "C) Konvolyutsiya", "D) Z-transform"], c: 1 },
            { q: "129. Frame nima?", o: ["A) Nuqta", "B) Qator", "C) Blok", "D) Kadr (ma'lumot bo'lagi)"], c: 3 },
            { q: "130. Lossless format?", o: ["A) JPEG", "B) PNG", "C) MPEG", "D) MP3"], c: 1 },
            { q: "131. MPEG transformatsiyasi?", o: ["A) DFT", "B) DCT", "C) Z", "D) Laplas"], c: 1 },
            { q: "132. Konteyner vazifasi?", o: ["A) Video", "B) Birlashtirish", "C) Kuchaytirish", "D) Rasm"], c: 1 },
            { q: "133. MPEG-2 qayerda?", o: ["A) Telefon", "B) DVD/TV", "C) SMS", "D) IoT"], c: 1 },
            { q: "134. MP4 standarti?", o: ["A) MPEG-1", "B) MPEG-2", "C) MPEG-4", "D) JPEG"], c: 2 },
            { q: "135. JPEG transformatsiyasi?", o: ["A) Fourier", "B) DCT", "C) Laplas", "D) Z"], c: 1 },
            { q: "136. JPEG turi?", o: ["A) Lossless", "B) Lossy", "C) Hech biri", "D) Audio"], c: 1 },
            { q: "137. Huffman kodi?", o: ["A) Chastotaga teskari uzunlik", "B) To'g'ri", "C) Bir xil", "D) Tasodifiy"], c: 0 },
            { q: "138. JPEG kengaytmasi?", o: ["A) .jpg", "B) .png", "C) .gif", "D) .bmp"], c: 0 },
            { q: "139. JPEG kvantlash?", o: ["A) Ortiqchani tashlash", "B) Kuchaytirish", "C) Formatlash", "D) Shovqin"], c: 0 },
            { q: "140. Golomb kodlash?", o: ["A) O‘rtacha ehtimollik", "B) Video", "C) Nutq", "D) Filtr"], c: 0 },
            { q: "141. JPEG2000 texnologiyasi?", o: ["A) DCT", "B) Veyvlet", "C) Z", "D) Konvolyutsiya"], c: 1 },
            { q: "142. JPEG algoritmi?", o: ["A) Huffman", "B) Golomb", "C) LZW", "D) BW"], c: 0 },
            { q: "143. JPEG bloklari?", o: ["A) 2x2", "B) 4x4", "C) 8x8", "D) 16x16"], c: 2 },
            { q: "144. Veyvlet afzalligi?", o: ["A) Ko'p rezolyutsiya", "B) Chastota", "C) Audio", "D) Shovqin"], c: 0 },
            { q: "145. JPEG kodlash bosqichi?", o: ["A) Huffman", "B) RLE", "C) LZW", "D) Fano"], c: 0 },
            { q: "146. JPEG kamchiligi?", o: ["A) Siqish", "B) Sifat pasayishi", "C) Qora-oq", "D) Audio"], c: 1 },
            { q: "147. JPEG2000 afzalligi?", o: ["A) Yuqori siqish/sifat", "B) Qora-oq", "C) Audio", "D) Shovqin"], c: 0 },
            { q: "148. JPEG DCT dan keyin?", o: ["A) Kvantlash", "B) Z", "C) Filtr", "D) Entropik"], c: 0 },
            { q: "149. JPEG matematikasi?", o: ["A) Matritsa", "B) Konvolyutsiya", "C) Korrelyatsiya", "D) Integral"], c: 0 },
            { q: "150. Nuqta operatori?", o: ["A) Har bir piksel", "B) Guruh", "C) Transformatsiya", "D) Filtr"], c: 0 },
            { q: "151. Guruh operatori?", o: ["A) Har bir", "B) Qo‘shni piksellar", "C) Hajm", "D) Chastota"], c: 1 },
            { q: "152. Konvolyutsiya tasvirda?", o: ["A) Hajm", "B) Filtrlash", "C) Rang", "D) Diskretlash"], c: 1 },
            { q: "153. Gistogramma nima?", o: ["A) Rang taqsimoti", "B) Amplituda", "C) Chastota", "D) Hajm"], c: 0 },
            { q: "154. Shovqin filtri?", o: ["A) Median", "B) Chastota", "C) Sobel", "D) Huffman"], c: 0 },
            { q: "155. Fazoviy filtr domeni?", o: ["A) Fazoviy", "B) Chastota", "C) Vaqt", "D) Z"], c: 0 },
            { q: "156. Past chastotali filtr?", o: ["A) Yumshatish", "B) Kuchaytirish", "C) Audio", "D) Video"], c: 0 },
            { q: "157. Yuqori chastotali filtr?", o: ["A) Chegarani kuchaytirish", "B) Yumshatish", "C) Kodlash", "D) Normallash"], c: 0 },
            { q: "158. Median filtr qaysi shovqinga?", o: ["A) Tuz va murch", "B) Gauss", "C) Kosinus", "D) Harmonik"], c: 0 },
            { q: "159. Filtrlash maqsadi?", o: ["A) Yaxshilash", "B) Buzish", "C) Siqish", "D) Kodlash"], c: 0 },
            { q: "160. Gistogramma tekislash?", o: ["A) Kontrast", "B) Shovqin", "C) Hajm", "D) Piksel"], c: 0 },
            { q: "161. Lineer filtr?", o: ["A) Past chastotali", "B) Yuqori", "C) Teskari", "D) Sobel"], c: 0 },
            { q: "162. Sobel operatori?", o: ["A) Chegara aniqlash", "B) Siqish", "C) Shovqin", "D) Gistogramma"], c: 0 },
            { q: "163. Kontrast oshirish?", o: ["A) Gistogramma tekislash", "B) Median", "C) Yuqori", "D) Kvantlash"], c: 0 },
            { q: "164. MPEG maqsadi?", o: ["A) Kuchaytirish", "B) Siqish", "C) Shovqin", "D) Amplituda"], c: 1 },
            { q: "165. MPEG-1 sohasi?", o: ["A) 8K", "B) CD/VCD", "C) AI", "D) Internet"], c: 1 },
            { q: "166. MPEG-2 sohasi?", o: ["A) CD", "B) HDTV/DVD", "C) Mobil", "D) Analog"], c: 1 },
            { q: "167. MP3 asosi?", o: ["A) MPEG-1 Layer III", "B) MPEG-2", "C) MPEG-4", "D) H.265"], c: 0 },
            { q: "168. Psixoakustik model?", o: ["A) Chastota", "B) Keraksiz tovushni olish", "C) Yuqori", "D) Amplituda"], c: 1 },
            { q: "169. Konteyner vazifasi?", o: ["A) Audio", "B) Video", "C) Birlashtirish", "D) Siqmaslik"], c: 2 },
            { q: "170. AVI konteyneri?", o: ["A) Internet", "B) Birlashtirish", "C) Rasm", "D) Filtr"], c: 1 },
            { q: "171. MPEG-4 imkoniyati?", o: ["A) Audio", "B) Interaktiv", "C) Rasm", "D) Shifrlash"], c: 1 },
            { q: "172. MP4 fayli?", o: ["A) Konteyner", "B) Video", "C) Audio", "D) JPEG"], c: 0 },
            { q: "173. WAV formati?", o: ["A) Siqilgan", "B) Siqilmagan", "C) Video", "D) Tasvir"], c: 1 },
            { q: "174. MPEG afzalligi?", o: ["A) Tezlik", "B) Siqish va sifat", "C) Kuchaytirish", "D) Shovqin"], c: 1 },
            { q: "175. JPEG siqish turi?", o: ["A) Yo‘qotishsiz", "B) Yo‘qotishli", "C) Binar", "D) Kuchaytirish"], c: 1 },
            { q: "176. JPEG kvantlash?", o: ["A) Hajm kamaytirish", "B) Rang", "C) Amplituda", "D) Kattalashtirish"], c: 0 },
            { q: "177. Huffman kodi?", o: ["A) Tez uchrasa qisqa", "B) Bir xil", "C) Audio", "D) Matematik"], c: 0 },
            { q: "178. Golomb kodi?", o: ["A) Rang", "B) Tasodifiy", "C) Past", "D) O‘xshash"], c: 3 },
            { q: "179. JPEG2000 asosi?", o: ["A) Huffman", "B) Veyvlet", "C) Fourier", "D) PCM"], c: 1 },
            { q: "180. JPEG birinchi bosqich?", o: ["A) Kvantlash", "B) RLE", "C) DCT", "D) Huffman"], c: 2 },
            { q: "181. Huffman kam ehtimol?", o: ["A) Uzun kod", "B) Qisqa", "C) Yo'q", "D) Raqam"], c: 0 },
            { q: "182. Golomb qayerda?", o: ["A) Video", "B) Audio", "C) Tasodif", "D) Tasvir"], c: 0 },
            { q: "183. Nuqta operatori?", o: ["A) Har bir piksel", "B) Butun", "C) Rang", "D) Amplituda"], c: 0 },
            { q: "184. Guruh operatori?", o: ["A) Har bir", "B) Qo‘shni guruh", "C) Hajm", "D) Chastota"], c: 1 },
            { q: "185. Konvolyutsiya tasvirda?", o: ["A) Hajm", "B) Filtrlash", "C) Rang", "D) Diskretlash"], c: 1 },
            { q: "186. Gistogramma?", o: ["A) Hajm", "B) Rang taqsimoti", "C) Chastota", "D) Aniqlik"], c: 1 },
            { q: "187. Gistogramma tekislash?", o: ["A) Kattalashtirish", "B) Kontrast", "C) Siqish", "D) Rang"], c: 1 },
            { q: "188. Shovqin filtri?", o: ["A) Median", "B) Nyquist", "C) Diskret", "D) FFT"], c: 0 },
            { q: "189. Past chastotali filtr?", o: ["A) Detallarni o‘chiradi", "B) Kuchaytiradi", "C) Kattalashtiradi", "D) Rang"], c: 0 },
            { q: "190. Yuqori chastotali filtr?", o: ["A) Kontur ajratish", "B) Kamaytirish", "C) Shovqin", "D) Siqish"], c: 0 },
            { q: "191. Median filtr?", o: ["A) Gauss", "B) Tuz va murch", "C) Sinus", "D) Past"], c: 1 },
            { q: "192. Konvolyutsiya yadrosi?", o: ["A) Kernel", "B) Piksel", "C) Amplituda", "D) Signal"], c: 0 },
            { q: "193. Gistogramma natijasi?", o: ["A) Kontrast", "B) Rang", "C) Hajm", "D) Piksel"], c: 0 },
            { q: "194. Sobel operatori?", o: ["A) Chegara filtri", "B) Chastota", "C) Konteyner", "D) Gistogramma"], c: 0 },
            { q: "195. Edge detection?", o: ["A) Rang", "B) Siqish", "C) Obyekt chegarasi", "D) Chastota"], c: 2 },
            { q: "196. Sobel vazifasi?", o: ["A) Siqish", "B) Kontur", "C) Shovqin", "D) Rang"], c: 1 },
            { q: "197. Sobel yo'nalishi?", o: ["A) 1", "B) 2", "C) 3", "D) 4"], c: 1 },
            { q: "198. Canny bosqichlari?", o: ["A) 2", "B) 3", "C) 4", "D) 5"], c: 2 },
            { q: "199. Canny non-maximum?", o: ["A) Yumshatadi", "B) Max bo'lmaganni o'chirish", "C) Shovqin", "D) Rang"], c: 1 },
            { q: "200. Yuqori chastotali filtr?", o: ["A) Kontur kuchaytirish", "B) Shovqin", "C) Siqish", "D) Rang"], c: 0 },
            { q: "201. Laplacian?", o: ["A) Birinchi", "B) Ikkinchi tartibli", "C) Median", "D) Kvantlash"], c: 1 },
            { q: "202. Chegara algoritmi?", o: ["A) Hajm", "B) Obyekt ajratish", "C) Rang", "D) Siqish"], c: 1 },
            { q: "203. Prewitt o‘xshash?", o: ["A) Sobel", "B) Canny", "C) Laplacian", "D) Fourier"], c: 0 },
            { q: "204. Shakl ajratish?", o: ["A) Hajm", "B) Fonidan ajratish", "C) Chastota", "D) Siqish"], c: 1 },
            { q: "205. Hough transform?", o: ["A) Chiziq/doira", "B) Rang", "C) Kvadrat", "D) Kontrast"], c: 0 },
            { q: "206. Segmentatsiya?", o: ["A) Siqish", "B) Qismlarga ajratish", "C) Rang", "D) Piksel"], c: 1 },
            { q: "207. Evolyutsiya usuli?", o: ["A) Rang", "B) Chegara o‘zgarishi", "C) Kvantlash", "D) Shovqin"], c: 1 },
            { q: "208. Doira Hough parametri?", o: ["A) 2", "B) 3", "C) 4", "D) 1"], c: 1 },
            { q: "209. Thresholding?", o: ["A) Guruhlarga ajratish", "B) Siqish", "C) Oshirish", "D) Normallash"], c: 0 },
            { q: "210. Hough sohasi?", o: ["A) TV", "B) Avtomobil raqami", "C) Audio", "D) Hajm"], c: 1 },
            { q: "211. Gauss filtri?", o: ["A) Past chastotali", "B) Yuqori", "C) Median", "D) Kalman"], c: 0 },
            { q: "212. Sharpening?", o: ["A) Silliqlash", "B) Kontur kuchaytirish", "C) Shovqin", "D) Rang"], c: 1 },
            { q: "213. Kernel?", o: ["A) Hajm", "B) Matritsa", "C) Piksel", "D) Gistogramma"], c: 1 },
            { q: "214. Sobel vazifasi?", o: ["A) Chegara", "B) Rang", "C) Shovqin", "D) Fayl"], c: 0 },
            { q: "215. Tasvir tiklash?", o: ["A) Qisqartirish", "B) Siqish", "C) Shikastlanganni tiklash", "D) Yangi"], c: 2 },
            { q: "216. Tiklash jarayoni?", o: ["A) Dekompozitsiya", "B) Rekonstruksiya", "C) Segmentatsiya", "D) Diskretizatsiya"], c: 1 },
            { q: "217. Inpainting?", o: ["A) Siqish", "B) Tiklash", "C) Filtrlash", "D) Formatlash"], c: 1 },
            { q: "218. ML tiklash?", o: ["A) Klassifikator", "B) Neyron tarmoq", "C) Fourier", "D) Z"], c: 1 },
            { q: "219. Shovqinli tasvirni tiklash?", o: ["A) Median", "B) Sobel", "C) FFT", "D) Laplace"], c: 0 },
            { q: "220. CNN?", o: ["A) Matn", "B) Tasvir", "C) Nutq", "D) Chastota"], c: 1 },
            { q: "221. Denoising?", o: ["A) Bo‘lish", "B) Shovqin kamaytirish", "C) Kuchaytirish", "D) Siqish"], c: 1 },
            { q: "222. Yo‘qolgan qismni to‘ldirish?", o: ["A) Segmentatsiya", "B) Inpainting", "C) Klassifikatsiya", "D) Filtrlash"], c: 1 },
            { q: "223. Super-resolution?", o: ["A) Kamaytiradi", "B) Yuqori aniqlik", "C) Qora-oq", "D) Rang"], c: 1 },
            { q: "224. ML model?", o: ["A) Siqish", "B) Bashorat qilish", "C) Bo‘lish", "D) O‘zgartirish"], c: 1 },
            { q: "225. Shovqin pasaytirish?", o: ["A) Wiener", "B) Sobel", "C) FFT", "D) JPEG"], c: 0 },
            { q: "226. ML ma'lumot?", o: ["A) Toza/Shikastlangan juftlik", "B) Shikastlangan", "C) Grafik", "D) Kod"], c: 0 },
            { q: "227. ML roli?", o: ["A) Siqish", "B) Aniqlash/Bashorat", "C) Ovoz", "D) Kesish"], c: 1 },
            { q: "228. Speech Recognition?", o: ["A) Matn", "B) Neyron tarmoq", "C) FFT", "D) Filtr"], c: 1 },
            { q: "229. Klassifikatsiya?", o: ["A) Kuchaytirish", "B) Turkumlash", "C) Tasodif", "D) Segmentlash"], c: 1 },
            { q: "230. Bashorat usuli?", o: ["A) RNN", "B) FFT", "C) JPEG", "D) Sobel"], c: 0 },
            { q: "231. Feature extraction?", o: ["A) Qisqartirish", "B) Muhim belgi ajratish", "C) Segmentlash", "D) Shovqin"], c: 1 },
            { q: "232. AI aniqlash?", o: ["A) Filtr", "B) Naqsh tanib olish", "C) Kamaytirish", "D) Tezlik"], c: 1 },
            { q: "233. MFCC?", o: ["A) Nutq", "B) Tasvir", "C) Matn", "D) Filtr"], c: 0 },
            { q: "234. Object Detection?", o: ["A) Siqish", "B) Obyekt aniqlash", "C) Kuchaytirish", "D) Rang"], c: 1 },
            { q: "235. Image Segmentation?", o: ["A) Siqish", "B) Qismlarga ajratish", "C) Burish", "D) Nusxalash"], c: 1 },
            { q: "236. IFFT2?", o: ["A) Teskari Furye", "B) Oldinga", "C) Aylantirish", "D) Filtrlash"], c: 0 }
        ];

        // ---------------------------------------------------------
        // 2. MANTIQ (LOGIC)
        // ---------------------------------------------------------

        const urlParams = new URLSearchParams(window.location.search);
        const part = parseInt(urlParams.get('part')) || 1;
        const questionsPerPart = 50;

        const startIndex = (part - 1) * questionsPerPart;
        const endIndex = Math.min(startIndex + questionsPerPart, ALL_QUESTIONS.length);
        
        const currentQuestions = ALL_QUESTIONS.slice(startIndex, endIndex);

        let currIndex = 0;
        let userAnswers = Array(currentQuestions.length).fill(null);
        let marked = Array(currentQuestions.length).fill(false);
        // Vaqt: 5-qism (36 talik) uchun 45 daqiqa, boshqalar uchun 60 daqiqa
        let time = (currentQuestions.length < 50) ? 45 * 60 : 60 * 60;

        // HTML Elementlar
        const qText = document.getElementById('questionText');
        const qCounter = document.getElementById('questionCounter');
        const optDiv = document.getElementById('options');
        const navGrid = document.getElementById('navGrid');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const markBtn = document.getElementById('markBtn');

        // Sarlavhani o'rnatish
        document.getElementById('testTitle').innerText = `Test - ${part}-Qism`;

        // --- TAYMER ---
        const timerInterval = setInterval(() => {
            time--;
            const m = Math.floor(time / 60).toString().padStart(2, '0');
            const s = (time % 60).toString().padStart(2, '0');
            document.getElementById('timer').innerText = `${m}:${s}`;
            
            if (time <= 300) document.getElementById('timer').classList.replace('text-red-600', 'text-red-800'); // Rangni to'qroq qilish
            
            if (time <= 0) {
                clearInterval(timerInterval);
                finishTest(true);
            }
        }, 1000);

        // --- SAVOLNI YUKLASH ---
        function loadQuestion(idx) {
            currIndex = idx;
            const q = currentQuestions[idx];
            
            qCounter.innerText = `SAVOL ${idx + 1} / ${currentQuestions.length}`;
            qText.innerText = q.q;

            // Belgilash tugmasi
            if (marked[idx]) {
                markBtn.innerHTML = '<i class="fas fa-bookmark text-yellow-500"></i> Olib tashlash';
                markBtn.classList.add('text-yellow-600');
            } else {
                markBtn.innerHTML = '<i class="far fa-bookmark"></i> Belgilash';
                markBtn.classList.remove('text-yellow-600');
            }

            // Variantlar
            optDiv.innerHTML = '';
            q.o.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = "w-full text-left p-4 rounded-xl border-2 transition-all duration-200 flex items-center group relative overflow-hidden";
                
                if (userAnswers[idx]) {
                    btn.disabled = true;
                    if (i === q.c) {
                        btn.className += " bg-green-50 border-green-500 text-green-800";
                        btn.innerHTML = `<div class="w-6 h-6 rounded-full border-2 border-green-500 mr-3 flex items-center justify-center bg-green-500 text-white"><i class="fas fa-check text-xs"></i></div> <span class="font-medium">${opt}</span>`;
                    } else if (i === userAnswers[idx].selected) {
                        btn.className += " bg-red-50 border-red-500 text-red-800";
                        btn.innerHTML = `<div class="w-6 h-6 rounded-full border-2 border-red-500 mr-3 flex items-center justify-center bg-red-500 text-white"><i class="fas fa-times text-xs"></i></div> <span class="font-medium">${opt}</span>`;
                    } else {
                        btn.className += " border-gray-100 opacity-50";
                        btn.innerHTML = `<div class="w-6 h-6 rounded-full border-2 border-gray-300 mr-3"></div> <span>${opt}</span>`;
                    }
                } else {
                    btn.className += " border-gray-200 hover:border-blue-400 hover:bg-blue-50 hover:shadow-sm";
                    btn.innerHTML = `<div class="w-6 h-6 rounded-full border-2 border-gray-300 mr-3 flex items-center justify-center group-hover:border-blue-500 transition-colors"></div> <span class="text-gray-700 font-medium group-hover:text-blue-700">${opt}</span>`;
                    btn.onclick = () => selectAnswer(i, idx);
                }
                optDiv.appendChild(btn);
            });

            // Navigatsiya
            updateNav();
            prevBtn.disabled = idx === 0;
            
            if (idx === currentQuestions.length - 1) {
                nextBtn.innerText = "Yakunlash";
                nextBtn.onclick = () => finishTest();
                nextBtn.classList.replace('bg-blue-600', 'bg-green-600');
                nextBtn.classList.replace('hover:bg-blue-700', 'hover:bg-green-700');
            } else {
                nextBtn.innerText = "Keyingi";
                nextBtn.onclick = () => loadQuestion(currIndex + 1);
                nextBtn.classList.replace('bg-green-600', 'bg-blue-600');
                nextBtn.classList.replace('hover:bg-green-700', 'hover:bg-blue-700');
            }
        }

        // --- JAVOB TANLASH ---
        function selectAnswer(optIndex, qIndex) {
            const correctIndex = currentQuestions[qIndex].c;
            const isCorrect = optIndex === correctIndex;
            
            userAnswers[qIndex] = { selected: optIndex, correct: isCorrect };
            loadQuestion(qIndex);
        }

        // --- NAVIGATSIYA ---
        function updateNav() {
            navGrid.innerHTML = '';
            userAnswers.forEach((ans, i) => {
                const btn = document.createElement('button');
                btn.innerText = i + 1;
                btn.className = "w-full aspect-square rounded-lg font-bold text-sm transition flex items-center justify-center border-2";
                
                if (i === currIndex) {
                    btn.className += " border-blue-500 ring-2 ring-blue-200 z-10";
                } else {
                    btn.className += " border-transparent";
                }

                if (ans) {
                    btn.className += ans.correct ? " bg-green-500 text-white border-green-600" : " bg-red-500 text-white border-red-600";
                } else {
                    btn.className += " bg-gray-100 text-gray-500 hover:bg-gray-200";
                }

                if (marked[i]) {
                    btn.classList.add('ring-2', 'ring-yellow-400');
                }

                btn.onclick = () => loadQuestion(i);
                navGrid.appendChild(btn);
            });
        }

        prevBtn.onclick = () => { if (currIndex > 0) loadQuestion(currIndex - 1); };
        
        markBtn.onclick = () => {
            marked[currIndex] = !marked[currIndex];
            loadQuestion(currIndex);
        };

        window.finishTest = function(force = false) {
            const answeredCount = userAnswers.filter(a => a !== null).length;
            
            if (!force && answeredCount < currentQuestions.length) {
                if(!confirm(`Siz ${currentQuestions.length - answeredCount} ta savolga javob bermadingiz. Baribir yakunlaysizmi?`)) return;
            } else if (!force) {
                if(!confirm("Testni yakunlashni tasdiqlaysizmi?")) return;
            }

            let correct = userAnswers.filter(a => a && a.correct).length;
            let total = currentQuestions.length;
            let percentage = Math.round((correct / total) * 100);

            const history = JSON.parse(localStorage.getItem('testHistory')) || [];
            history.push({
                date: new Date().toLocaleString('uz-UZ'),
                part: part,
                correct: correct,
                total: total,
                scorePercentage: percentage
            });
            localStorage.setItem('testHistory', JSON.stringify(history));

            alert(`Test yakunlandi!\n\nTo'g'ri javoblar: ${correct} ta\nNatija: ${percentage}%`);
            window.location.href = 'dashboard.html';
        };

        // Boshlash
        loadQuestion(0);

    </script>
</body>
</html>